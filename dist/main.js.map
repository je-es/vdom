{"version":3,"sources":["../src/utils/helpers.ts","../src/utils/errors.ts","../src/core/createElement.ts","../src/core/html.ts","../src/core/props.ts","../src/core/render.ts","../src/core/patch.ts"],"names":["isNullOrBoolean","value","isVNode","isPrimitive","flattenChildren","children","flattened","child","sanitizeHTML","html","dangerous","sanitized","pattern","camelToKebab","str","shallowEqual","a","b","keysA","keysB","key","idCounter","generateId","prefix","isBrowser","getChildAt","parent","index","isFunction","isEventProp","propName","getEventName","deepClone","obj","cloned","config","setConfig","newConfig","getConfig","VDOMError","message","vnode","context","handleError","error","vdomError","handlerError","warn","assert","condition","createErrorPlaceholder","validateVNode","withErrorHandling","fn","args","createElement","type","props","flatChildren","normalizedProps","Fragment","createTextNode","text","h","div","span","label","input","textarea","select","option","button","form","p","h1","h2","h3","h4","h5","h6","img","i","jsx","jsxs","jsxDEV","MARKERS","strings","values","htmlString","isInAttribute","marker","createMarker","parseHTML","applyEventHandlers","handler","lastEqualIndex","lastGtIndex","processedHTML","eventMarkerProtection","protectionIndex","match","eventName","placeholder","original","template","element","result","convertDOMToVNode","handleTextNode","el","parseAttributes","parseChildren","array","item","processedText","attributes","attr","name","replaceMarkers","replaced","childNodes","foundArray","foundVNodes","converted","valueMap","BOOLEAN_ATTRS","updateProps","oldProps","newProps","removeProperty","setProperty","oldValue","setEventListener","setClassName","setStyle","__value","setBooleanAttribute","setAttribute","oldHandler","className","prop","val","attrName","createDOMElement","createFragment","createRegularElement","fragment","childElement","render","container","patchChild","oldChild","newChild","node","oldVNode","patch","patchChildrenByIndex","oldChildren","newChildren","maxLength","_","idx","c","lastChild","patchChildrenWithKeys","oldKeyMap","domElements","elementIndex","newElements","textNode","newVNode","oldChildrenArray","newChildrenArray","newElement","patchChildren","addNode","removeNode","updateTextNode","oldText","newText","oldStr","newStr","replaceNode","hasVNodeChanged","updateElement","elementToUpdate","parentMatchesVNode","childIsDifferentType","updateNode"],"mappings":"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","file":"main.js","sourcesContent":["// src/utils/helpers.ts\n//\n// Made with ❤️ by Maysara.\n\n\n\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\n\n    import type { VNodeChild, VNodeChildren } from '../types';\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\n\n\n\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\n\n    /**\n     * Check if value should be skipped in rendering\n     */\n    export function isNullOrBoolean(value: unknown): value is false | null | undefined | true {\n        return value === false || value === null || value === undefined || value === true;\n    }\n\n    /**\n     * Check if value is a VNode\n     * FIX: Return false for null instead of null\n     */\n    export function isVNode(value: unknown): boolean {\n        if (!value || typeof value !== 'object') {\n            return false;\n        }\n        return 'type' in value && 'props' in value && 'children' in value;\n    }\n\n    /**\n     * Check if value is a primitive that can be rendered\n     */\n    export function isPrimitive(value: unknown): value is string | number {\n        return typeof value === 'string' || typeof value === 'number';\n    }\n\n    /**\n     * Flatten nested children arrays recursively\n     */\n    export function flattenChildren(children: VNodeChildren[]): VNodeChild[] {\n        const flattened: VNodeChild[] = [];\n\n        for (const child of children) {\n            if (Array.isArray(child)) {\n                flattened.push(...flattenChildren(child));\n            } else if (!isNullOrBoolean(child)) {\n                flattened.push(child);\n            }\n        }\n\n        return flattened;\n    }\n\n    /**\n     * Sanitize HTML to prevent XSS attacks\n     */\n    export function sanitizeHTML(html: string): string {\n        // Remove dangerous patterns\n        const dangerous = [\n            /<script[\\s\\S]*?<\\/script>/gi,\n            /javascript:/gi,\n            /on\\w+\\s*=/gi, // inline event handlers like onerror=\n            /<iframe[\\s\\S]*?<\\/iframe>/gi,\n            /<object[\\s\\S]*?<\\/object>/gi,\n            /<embed[\\s\\S]*?>/gi,\n        ];\n\n        let sanitized = html;\n        for (const pattern of dangerous) {\n            sanitized = sanitized.replace(pattern, '');\n        }\n\n        return sanitized;\n    }\n\n    /**\n     * Convert camelCase to kebab-case\n     */\n    export function camelToKebab(str: string): string {\n        return str.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();\n    }\n\n    /**\n     * Check if two values are equal (shallow comparison)\n     */\n    export function shallowEqual(a: unknown, b: unknown): boolean {\n        if (a === b) return true;\n        if (typeof a !== typeof b) return false;\n        if (typeof a !== 'object' || a === null || b === null) return false;\n\n        const keysA = Object.keys(a);\n        const keysB = Object.keys(b as Record<string, unknown>);\n\n        if (keysA.length !== keysB.length) return false;\n\n        for (const key of keysA) {\n            if ((a as Record<string, unknown>)[key] !== (b as Record<string, unknown>)[key]) return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Generate unique ID\n     */\n    let idCounter = 0;\n    export function generateId(prefix = 'vdom'): string {\n        return `${prefix}-${++idCounter}-${Date.now()}`;\n    }\n\n    /**\n     * Check if code is running in browser environment\n     */\n    export function isBrowser(): boolean {\n        return typeof window !== 'undefined' && typeof document !== 'undefined';\n    }\n\n    /**\n     * Safe way to get element from parent by index\n     */\n    export function getChildAt(parent: HTMLElement, index: number): Node | undefined {\n        return parent.childNodes[index] as Node | undefined;\n    }\n\n    /**\n     * Check if value is a function\n     */\n    export function isFunction(value: unknown): value is (...args: unknown[]) => unknown {\n        return typeof value === 'function';\n    }\n\n    /**\n     * Check if string is an event handler prop name\n     */\n    export function isEventProp(propName: string): boolean {\n        return propName.startsWith('on') && propName.length > 2;\n    }\n\n    /**\n     * Get event name from prop name (onclick -> click)\n     */\n    export function getEventName(propName: string): string {\n        return propName.substring(2).toLowerCase();\n    }\n\n    /**\n     * Deep clone object (simple implementation)\n     */\n    export function deepClone<T>(obj: T): T {\n        if (obj === null || typeof obj !== 'object') return obj;\n        if (Array.isArray(obj)) return obj.map(deepClone) as T;\n\n        const cloned: Record<string, unknown> = {};\n        for (const key in obj) {\n            if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                cloned[key] = deepClone((obj as Record<string, unknown>)[key]);\n            }\n        }\n        return cloned as T;\n    }\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝","// src/utils/errors.ts\n//\n// Made with ❤️ by Maysara.\n\n\n\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\n\n    import type { VNode, VDOMConfig } from '../types';\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\n\n\n\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\n\n    /**\n     * Global configuration\n     */\n    let config: VDOMConfig = {\n        devMode: process.env.NODE_ENV !== 'production',\n        sanitizeHTML: true,\n        onError: undefined,\n    };\n\n    /**\n     * Set global configuration\n     */\n    export function setConfig(newConfig: Partial<VDOMConfig>): void {\n        config = { ...config, ...newConfig };\n    }\n\n    /**\n     * Get current configuration\n     */\n    export function getConfig(): VDOMConfig {\n        return { ...config };\n    }\n\n    /**\n     * Custom error class for VDOM errors\n     */\n    export class VDOMError extends Error {\n        constructor(\n            message: string,\n            public vnode?: VNode,\n            public context?: string\n        ) {\n            super(message);\n            this.name = 'VDOMError';\n        }\n    }\n\n    /**\n     * Handle errors with custom error handler if provided\n     */\n    export function handleError(error: Error, vnode?: VNode, context?: string): void {\n        const vdomError = error instanceof VDOMError\n            ? error\n            : new VDOMError(error.message, vnode, context);\n\n        if (config.onError) {\n            try {\n                config.onError(vdomError, vnode);\n            } catch (handlerError) {\n                console.error('Error in custom error handler:', handlerError);\n                console.error('Original error:', vdomError);\n            }\n        } else {\n            console.error('VDOM Error:', vdomError.message);\n            if (config.devMode && vnode) {\n                console.error('VNode:', vnode);\n                if (context) console.error('Context:', context);\n            }\n        }\n    }\n\n    /**\n     * Warning function (only in dev mode)\n     */\n    export function warn(message: string, vnode?: VNode): void {\n        if (config.devMode) {\n            console.warn(`[VDOM Warning]: ${message}`);\n            if (vnode) console.warn('VNode:', vnode);\n        }\n    }\n\n    /**\n     * Assert function for development checks\n     */\n    export function assert(condition: boolean, message: string): void {\n        if (config.devMode && !condition) {\n            throw new VDOMError(`Assertion failed: ${message}`);\n        }\n    }\n\n    /**\n     * Create error placeholder element\n     */\n    export function createErrorPlaceholder(error: Error): Text {\n        const message = config.devMode\n            ? `[Render Error: ${error.message}]`\n            : '[Render Error]';\n        return document.createTextNode(message);\n    }\n\n    /**\n     * Validate VNode structure\n     */\n    export function validateVNode(vnode: unknown): vnode is VNode {\n        if (!vnode || typeof vnode !== 'object') {\n            return false;\n        }\n\n        if (!('type' in vnode && 'props' in vnode && 'children' in vnode)) {\n            if (config.devMode) {\n                warn('Invalid VNode structure: missing required properties (type, props, children)', vnode as VNode);\n            }\n            return false;\n        }\n\n        if (typeof vnode.type !== 'string') {\n            if (config.devMode) {\n                warn('Invalid VNode type: must be a string', vnode as VNode);\n            }\n            return false;\n        }\n\n        if (!Array.isArray(vnode.children)) {\n            if (config.devMode) {\n                warn('Invalid VNode children: must be an array', vnode as VNode);\n            }\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Wrap function with error handling\n     */\n    export function withErrorHandling<TArgs extends unknown[], TReturn>(\n        fn: (...args: TArgs) => TReturn,\n        context?: string\n    ): (...args: TArgs) => TReturn | null {\n        return (...args: TArgs): TReturn | null => {\n            try {\n                return fn(...args);\n            } catch (error) {\n                handleError(error as Error, undefined, context);\n                return null;\n            }\n        };\n    }\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝","// src/core/createElement.ts\n//\n// Made with ❤️ by Maysara.\n\n\n\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\n\n    import type { VNode, VNodeProps, VNodeChild, VNodeChildren } from '../types';\n    import { flattenChildren } from '../utils/helpers';\n    import { warn } from '../utils/errors';\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\n\n\n\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\n\n    /**\n     * Create a Virtual Node\n     *\n     * @param type - Element type or 'fragment'\n     * @param props - Element properties\n     * @param children - Child elements\n     * @returns VNode\n     *\n     * @example\n     * ```ts\n     * const vnode = createElement('div', { className: 'box' }, 'Hello World');\n     * ```\n     */\n    export function createElement(\n        type: string | 'fragment',\n        props: VNodeProps | string | null = null,\n        ...children: VNodeChildren[]\n    ): VNode {\n        // Validate type in development\n        if (process.env.NODE_ENV !== 'production') {\n            if (!type || typeof type !== 'string') {\n                warn(`Invalid element type: ${type}`);\n            }\n        }\n\n        if(typeof props === 'string') {\n            props = { className: props };\n        }\n\n        if(typeof props === 'object' && props !== null && 'class' in props) {\n            props = { ...props, className: props.class };\n            delete props.class;\n        }\n\n        const flatChildren = flattenChildren(children);\n\n        // Handle fragments\n        if (type === 'fragment') {\n            return {\n                type: 'fragment',\n                props: {},\n                children: flatChildren,\n            };\n        }\n\n        // Handle class vs className\n        const normalizedProps = props ? { ...props } : {};\n        if (normalizedProps.class && !normalizedProps.className) {\n            normalizedProps.className = normalizedProps.class;\n            delete normalizedProps.class;\n        }\n\n        return {\n            type,\n            props: normalizedProps,\n            children: flatChildren,\n        };\n    }\n\n    /**\n     * Create a fragment (wrapper for multiple children without parent element)\n     *\n     * @param children - Child elements\n     * @returns VNode with type 'fragment'\n     *\n     * @example\n     * ```ts\n     * const frag = Fragment(\n     *   createElement('div', {}, 'First'),\n     *   createElement('div', {}, 'Second')\n     * );\n     * ```\n     */\n    export function Fragment(...children: VNodeChild[]): VNode {\n        return createElement('fragment', null, ...children);\n    }\n\n    /**\n     * Create a text node\n     *\n     * @param text - Text content\n     * @returns String that will be rendered as text\n     */\n    export function createTextNode(text: string | number): string {\n        return String(text);\n    }\n\n    /**\n     * JSX Factory function (for JSX pragma)\n     * Alias for createElement to be used with JSX\n     */\n    export const h = createElement;\n    export const div = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('div', props, ...children);\n    };\n\n    export const span = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('span', props, ...children);\n    };\n\n    export const label = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('label', props, ...children);\n    };\n\n    export const input = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('input', props, ...children);\n    };\n\n    export const textarea = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('textarea', props, ...children);\n    };\n\n    export const select = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('select', props, ...children);\n    };\n\n    export const option = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('option', props, ...children);\n    };\n\n    export const button = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('button', props, ...children);\n    };\n\n    export const form = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('form', props, ...children);\n    };\n\n    export const p = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('p', props, ...children);\n    };\n\n    export const h1 = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('h1', props, ...children);\n    };\n\n    export const h2 = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('h2', props, ...children);\n    };\n\n    export const h3 = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('h3', props, ...children);\n    };\n\n    export const h4 = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('h4', props, ...children);\n    };\n\n    export const h5 = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('h5', props, ...children);\n    };\n\n    export const h6 = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('h6', props, ...children);\n    };\n\n    export const a = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('a', props, ...children);\n    };\n\n    export const img = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('img', props, ...children);\n    };\n\n    export const i = (props?: VNodeProps | string | null | undefined, ...children: VNodeChildren[]): VNode => {\n        return h('i', props, ...children);\n    };\n\n    /**\n     * JSX Fragment factory\n     */\n    export const jsx = createElement;\n    export const jsxs = createElement;\n    export const jsxDEV = createElement;\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝","// src/core/html.ts\n//\n// Made with ❤️ by Maysara.\n\n\n\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\n\n    import type { VNode, ParseContext, EventHandler, VNodeChild } from '../types';\n    import { isNullOrBoolean } from '../utils/helpers';\n    import { sanitizeHTML } from '../utils/helpers';\n    import { getConfig } from '../utils/errors';\n    import { createElement } from './createElement';\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\n\n\n\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\n\n    /**\n     * Markers for identifying interpolated values\n     */\n    const MARKERS = {\n        EVENT: '__EVENT_',\n        VNODE: '__VNODE_',\n        ARRAY: '__ARRAY_',\n        VALUE: '__VALUE_'\n    } as const;\n\n    /**\n     * HTML tagged template literal\n     * Creates VNodes from HTML template strings with interpolated values\n     *\n     * FIX: Store event handlers separately and apply after parsing to avoid HTML parser issues\n     */\n    export function html(\n        strings: TemplateStringsArray,\n        ...values: unknown[]\n    ): VNode {\n        const context: ParseContext = {\n            eventHandlers: new Map(),\n            vnodes: new Map(),\n            arrays: new Map(),\n            plainValues: new Map(),\n        };\n\n        let htmlString = '';\n\n        // Build HTML string and store values\n        for (let i = 0; i < strings.length; i++) {\n            const str = strings[i];\n            htmlString += str;\n\n            if (i < values.length) {\n                const value = values[i];\n\n                if (isNullOrBoolean(value)) {\n                    if (value === false && isInAttribute(str)) {\n                        htmlString += 'false';\n                    }\n                    continue;\n                }\n\n                const marker = createMarker(value, i, context);\n                htmlString += marker;\n            }\n        }\n\n        const vnode = parseHTML(htmlString, context);\n\n        // Apply event handlers from context to the VNode\n        applyEventHandlers(vnode, context);\n\n        return vnode;\n    }\n\n    /**\n     * Apply stored event handlers to VNode props\n     * Recursively searches for event handler markers and replaces them with actual functions\n     */\n    function applyEventHandlers(vnode: VNode, context: ParseContext): void {\n        // Check props for event handler markers and replace them\n        for (const [key, value] of Object.entries(vnode.props)) {\n            if (key.startsWith('on') && typeof value === 'string') {\n                // The value should be the event marker like \"__EVENT_0__\"\n                // Try exact match first\n                if (context.eventHandlers.has(value)) {\n                    vnode.props[key] = context.eventHandlers.get(value);\n                    continue;\n                }\n\n                // If not exact match, try finding any marker that's contained in the value\n                for (const [marker, handler] of context.eventHandlers) {\n                    if (value.includes(marker)) {\n                        vnode.props[key] = handler;\n                        break;\n                    }\n                }\n            }\n        }\n\n        // Recursively apply to children\n        for (const child of vnode.children) {\n            if (child && typeof child === 'object' && 'type' in child) {\n                applyEventHandlers(child as VNode, context);\n            }\n        }\n    }\n\n    /**\n     * Check if we're currently inside an attribute VALUE (not name)\n     */\n    function isInAttribute(str: string): boolean {\n        const lastEqualIndex = str.lastIndexOf('=');\n        const lastGtIndex = str.lastIndexOf('>');\n        return lastEqualIndex > lastGtIndex;\n    }\n\n    /**\n     * Create appropriate marker for value type\n     */\n    function createMarker(value: unknown, index: number, context: ParseContext): string {\n        // Arrays\n        if (Array.isArray(value)) {\n            const marker = `${MARKERS.ARRAY}${index}__`;\n            context.arrays.set(marker, value);\n            return marker;\n        }\n\n        // Functions (event handlers)\n        if (typeof value === 'function') {\n            const marker = `${MARKERS.EVENT}${index}__`;\n            context.eventHandlers.set(marker, value as EventHandler);\n            return marker;\n        }\n\n        // VNodes\n        if (value && typeof value === 'object' && 'type' in value) {\n            const marker = `${MARKERS.VNODE}${index}__`;\n            context.vnodes.set(marker, value as VNode);\n            return marker;\n        }\n\n        // Plain values\n        const marker = `${MARKERS.VALUE}${index}__`;\n        context.plainValues.set(marker, value);\n        return marker;\n    }\n\n    /**\n     * Parse HTML string to VNode\n     */\n    function parseHTML(html: string, context: ParseContext): VNode {\n        const config = getConfig();\n\n        let processedHTML = html.trim();\n\n        if (config.sanitizeHTML) {\n            // CRITICAL FIX: Protect event markers BEFORE sanitization\n            // The sanitizer removes onclick=\"...\" attributes, so we need to protect our markers\n            const eventMarkerProtection: { placeholder: string; original: string }[] = [];\n            let protectionIndex = 0;\n\n            // Replace onclick=\"__EVENT_N__\" with a safe placeholder\n            processedHTML = processedHTML.replace(/\\s+(on\\w+)=\"(__EVENT_\\d+__)\"/g, (match, eventName, marker) => {\n                const placeholder = `data-vdom-event-${protectionIndex}=\"${marker}\"`;\n                eventMarkerProtection.push({ placeholder, original: match });\n                protectionIndex++;\n                return ` ${placeholder}`;\n            });\n\n            // Also handle onclick=__EVENT_N__ (without quotes)\n            processedHTML = processedHTML.replace(/\\s+(on\\w+)=(__EVENT_\\d+__)/g, (match, eventName, marker) => {\n                const placeholder = `data-vdom-event-${protectionIndex}=\"${marker}\"`;\n                eventMarkerProtection.push({ placeholder, original: match });\n                protectionIndex++;\n                return ` ${placeholder}`;\n            });\n\n            // Now sanitize\n            processedHTML = sanitizeHTML(processedHTML);\n\n            // Restore event markers\n            for (const { placeholder, original } of eventMarkerProtection) {\n                processedHTML = processedHTML.replace(placeholder, original);\n            }\n        }\n\n        const template = document.createElement('template');\n        template.innerHTML = processedHTML;\n\n        const element = template.content.firstChild as HTMLElement;\n\n        if (!element) {\n            return createElement('div', {}, '');\n        }\n\n        const result = convertDOMToVNode(element, context);\n\n        // If result is a string (text node), wrap it in a span\n        if (typeof result === 'string') {\n            return createElement('span', {}, result);\n        }\n\n        return result;\n    }\n\n    /**\n     * Convert DOM node to VNode\n     */\n    function convertDOMToVNode(element: Node, context: ParseContext): VNode | string {\n        // Text nodes\n        if (element.nodeType === Node.TEXT_NODE) {\n            return handleTextNode(element.textContent || '', context);\n        }\n\n        // Skip non-element nodes\n        if (element.nodeType !== Node.ELEMENT_NODE) {\n            return '';\n        }\n\n        const el = element as HTMLElement;\n        const props = parseAttributes(el.attributes, context);\n        const children = parseChildren(el.childNodes, context) as VNodeChild[];\n\n        return {\n            type: el.tagName.toLowerCase(),\n            props,\n            children,\n        };\n    }\n\n    /**\n     * Handle text node with markers\n     */\n    function handleTextNode(text: string, context: ParseContext): VNode | string {\n        // Check for array markers\n        for (const [marker, array] of context.arrays) {\n            if (text.includes(marker)) {\n                return {\n                    type: 'fragment',\n                    props: {},\n                    children: array.filter(item => !isNullOrBoolean(item)) as VNodeChild[],\n                };\n            }\n        }\n\n        // Check for VNode markers\n        for (const [marker, vnode] of context.vnodes) {\n            if (text.includes(marker)) {\n                return vnode;\n            }\n        }\n\n        // Replace value markers\n        let processedText = text;\n        for (const [marker, value] of context.plainValues) {\n            processedText = processedText.replace(marker, String(value));\n        }\n\n        return processedText;\n    }\n\n    /**\n     * Parse element attributes\n     * IMPORTANT: Just store the raw marker values for event handlers\n     * We'll replace them with actual functions in applyEventHandlers\n     */\n    function parseAttributes(\n        attributes: NamedNodeMap,\n        context: ParseContext\n    ): Record<string, unknown> {\n        const props: Record<string, unknown> = {};\n\n        for (const attr of Array.from(attributes)) {\n            const { name, value } = attr;\n\n            // Event handlers - keep the marker string as-is\n            // It will be replaced by applyEventHandlers later\n            if (name.startsWith('on')) {\n                props[name] = value;\n                continue;\n            }\n\n            // Class names\n            if (name === 'class') {\n                props.className = replaceMarkers(value, context.plainValues).trim();\n                continue;\n            }\n\n            // Boolean attributes\n            if (name === 'checked' || name === 'disabled' || name === 'selected' || name === 'required') {\n                const replaced = replaceMarkers(value, context.plainValues);\n\n                if (replaced === 'false') {\n                    continue;\n                } else if (replaced === 'true' || replaced === '') {\n                    props[name] = true;\n                } else {\n                    props[name] = replaced;\n                }\n                continue;\n            }\n\n            // Regular attributes\n            props[name] = replaceMarkers(value, context.plainValues);\n        }\n\n        return props;\n    }\n\n    /**\n     * Parse child nodes\n     */\n    function parseChildren(childNodes: NodeListOf<ChildNode>, context: ParseContext): unknown[] {\n        const children: unknown[] = [];\n\n        for (const child of Array.from(childNodes)) {\n            if (child.nodeType === Node.TEXT_NODE) {\n                const text = child.textContent || '';\n\n                // Check for array markers\n                let foundArray = false;\n                for (const [marker, array] of context.arrays) {\n                    if (text.includes(marker)) {\n                        children.push(...array.filter(item => !isNullOrBoolean(item)));\n                        foundArray = true;\n                        break;\n                    }\n                }\n                if (foundArray) continue;\n\n                // Check for VNode markers\n                const foundVNodes: unknown[] = [];\n                for (const [marker, vnode] of context.vnodes) {\n                    if (text.includes(marker)) {\n                        if (vnode && typeof vnode === 'object' && 'type' in vnode) {\n                            foundVNodes.push(vnode);\n                        }\n                    }\n                }\n                if (foundVNodes.length > 0) {\n                    children.push(...foundVNodes);\n                    continue;\n                }\n\n                // Add processed text\n                if (text.trim()) {\n                    const processedText = replaceMarkers(text, context.plainValues);\n                    if (processedText.trim()) {\n                        children.push(processedText);\n                    }\n                }\n            } else if (child.nodeType === Node.ELEMENT_NODE) {\n                const converted = convertDOMToVNode(child, context);\n                if (converted) children.push(converted);\n            }\n        }\n\n        return children;\n    }\n\n    /**\n     * Replace markers in string with actual values\n     */\n    function replaceMarkers(str: string, valueMap: Map<string, unknown>): string {\n        let result = str;\n        for (const [marker, value] of valueMap) {\n            result = result.replace(marker, String(value));\n        }\n        return result;\n    }\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝","// src/core/props.ts\n//\n// Made with ❤️ by Maysara.\n\n\n\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\n\n    import type { VNodeProps, StyleObject } from '../types';\n    import { isEventProp, getEventName, isFunction } from '../utils/helpers';\n    import { warn } from '../utils/errors';\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\n\n\n\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\n\n    /**\n     * Boolean attributes that work differently\n     */\n    const BOOLEAN_ATTRS = new Set([\n        'checked',\n        'selected',\n        'disabled',\n        'readOnly',\n        'required',\n        'autoFocus',\n        'multiple',\n        'hidden',\n        'autoplay',\n        'controls',\n        'loop',\n        'muted',\n        'open',\n        'reversed'\n    ]);\n\n    /**\n     * Update element properties\n     */\n    export function updateProps(\n        element: HTMLElement,\n        oldProps: VNodeProps,\n        newProps: VNodeProps\n    ): void {\n        // Remove old props\n        for (const key in oldProps) {\n            if (!(key in newProps)) {\n                removeProperty(element, key, oldProps[key]);\n            }\n        }\n\n        // Set new props\n        for (const [key, value] of Object.entries(newProps)) {\n            if (oldProps[key] !== value) {\n                setProperty(element, key, value, oldProps[key]);\n            }\n        }\n    }\n\n    /**\n     * Set a single property on element\n     */\n    export function setProperty(\n        element: HTMLElement,\n        key: string,\n        value: unknown,\n        oldValue?: unknown\n    ): void {\n        // Skip special keys\n        if (key === 'children' || key === 'key') return;\n\n        // Event handlers\n        if (isEventProp(key)) {\n            setEventListener(element, key, value, oldValue);\n            return;\n        }\n\n        // Ref callback\n        if (key === 'ref' && isFunction(value)) {\n            value(element);\n            return;\n        }\n\n        // Class name\n        if (key === 'className' || key === 'class') {\n            setClassName(element, value);\n            return;\n        }\n\n        // Style\n        if (key === 'style') {\n            setStyle(element, value as StyleObject | null | undefined);\n            return;\n        }\n\n        // Dangerous HTML\n        const __value = value as { __html: string } | undefined;\n        if (key === 'dangerouslySetInnerHTML' && __value?.__html) {\n            element.innerHTML = __value?.__html;\n            return;\n        }\n\n        // Boolean attributes\n        if (BOOLEAN_ATTRS.has(key)) {\n            setBooleanAttribute(element, key, value);\n            return;\n        }\n\n        // Regular attributes\n        setAttribute(element, key, value);\n    }\n\n    /**\n     * Remove a property from element\n     */\n    export function removeProperty(element: HTMLElement, key: string, oldValue: unknown): void {\n        // Event handlers\n        if (isEventProp(key) && isFunction(oldValue)) {\n            const eventName = getEventName(key);\n            element.removeEventListener(eventName, oldValue as EventListenerOrEventListenerObject);\n            return;\n        }\n\n        // Ref\n        if (key === 'ref' && isFunction(oldValue)) {\n            oldValue(null);\n            return;\n        }\n\n        // Class name\n        if (key === 'className' || key === 'class') {\n            element.className = '';\n            element.removeAttribute('class');\n            return;\n        }\n\n        // Style\n        if (key === 'style') {\n            element.removeAttribute('style');\n            return;\n        }\n\n        // Boolean attributes\n        if (BOOLEAN_ATTRS.has(key)) {\n            element.removeAttribute(key.toLowerCase());\n            return;\n        }\n\n        // Regular attributes\n        element.removeAttribute(key);\n    }\n\n    /**\n     * Set event listener\n     */\n    function setEventListener(\n        element: HTMLElement,\n        propName: string,\n        handler: unknown,\n        oldHandler?: unknown\n    ): void {\n        if (!isFunction(handler)) {\n            if (process.env.NODE_ENV !== 'production') {\n                warn(`Event handler ${propName} is not a function`);\n            }\n            return;\n        }\n\n        const eventName = getEventName(propName);\n\n        // Remove old handler\n        if (oldHandler && isFunction(oldHandler)) {\n            element.removeEventListener(eventName, oldHandler as EventListenerOrEventListenerObject);\n        }\n\n        // Add new handler\n        element.addEventListener(eventName, handler as EventListenerOrEventListenerObject);\n    }\n\n    /**\n     * Set class name\n     */\n    function setClassName(element: HTMLElement, value: unknown): void {\n        if (value == null || value === false) {\n            element.className = '';\n            element.removeAttribute('class');\n            return;\n        }\n\n        const className = String(value).trim();\n        if (className) {\n            element.className = className;\n        } else {\n            element.className = '';\n            element.removeAttribute('class');\n        }\n    }\n\n    type SetStyleValueType = string | StyleObject | null | undefined;\n    /**\n     * Set style attribute\n     */\n    function setStyle(element: HTMLElement, value: SetStyleValueType): void {\n        if (value == null) {\n            element.removeAttribute('style');\n            return;\n        }\n\n        // String style\n        if (typeof value === 'string') {\n            element.setAttribute('style', value);\n            return;\n        }\n\n        // Object style\n        if (typeof value === 'object') {\n            for (const [prop, val] of Object.entries(value)) {\n                if (val == null) {\n                    (element.style as StyleObject)[prop] = '';\n                } else {\n                    (element.style as StyleObject)[prop] = val as string;\n                }\n            }\n        }\n    }\n\n    /**\n     * Set boolean attribute\n     *\n     * Treat any value except false, null, undefined as true\n     * This matches HTML spec and common framework behavior\n     * Special case: empty string '' is valid and sets the attribute\n     */\n    function setBooleanAttribute(element: HTMLElement, key: string, value: unknown): void {\n        const attrName = key.toLowerCase();\n\n        // Explicitly false, null, or undefined removes the attribute\n        if (value === false || value === null || value === undefined) {\n            element.removeAttribute(attrName);\n            return;\n        }\n\n        // Any other value (including empty string '') sets the attribute\n        // This includes: true, 'true', '', 'yes', 'disabled', numbers, etc.\n        element.setAttribute(attrName, '');\n    }\n\n    /**\n     * Set regular attribute\n     */\n    function setAttribute(element: HTMLElement, key: string, value: unknown): void {\n        if (value == null || value === false) {\n            element.removeAttribute(key);\n            return;\n        }\n\n        // Convert to string and set\n        element.setAttribute(key, String(value));\n    }\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝","// src/core/render.ts\n//\n// Made with ❤️ by Maysara.\n\n\n\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\n\n    import type { VNode } from '../types';\n    import { isNullOrBoolean, isPrimitive } from '../utils/helpers';\n    import { handleError, createErrorPlaceholder, validateVNode } from '../utils/errors';\n    import { updateProps } from './props';\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\n\n\n\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\n\n    /**\n     * Create a real DOM element from a VNode\n     *\n     * @param vnode - Virtual node to convert\n     * @returns HTML element, text node, or document fragment\n     */\n    export function createDOMElement(vnode: VNode | string | number): HTMLElement | Text | DocumentFragment {\n        try {\n            // Handle text nodes (primitives)\n            if (isPrimitive(vnode)) {\n                return document.createTextNode(String(vnode));\n            }\n\n            // Validate VNode structure\n            if (!validateVNode(vnode)) {\n                throw new Error('Invalid VNode structure');\n            }\n\n            // Handle fragments\n            if (vnode.type === 'fragment') {\n                return createFragment(vnode);\n            }\n\n            // Handle regular elements\n            return createRegularElement(vnode);\n\n        } catch (error) {\n            handleError(error as Error, typeof vnode === 'object' ? vnode : undefined, 'createDOMElement');\n            return createErrorPlaceholder(error as Error);\n        }\n    }\n\n    /**\n     * Create a document fragment from VNode\n     */\n    function createFragment(vnode: VNode): DocumentFragment {\n        const fragment = document.createDocumentFragment();\n\n        for (const child of vnode.children) {\n            if (isNullOrBoolean(child)) continue;\n\n            const childElement = isPrimitive(child)\n                ? document.createTextNode(String(child))\n                : createDOMElement(child as VNode);\n\n            fragment.appendChild(childElement);\n        }\n\n        return fragment;\n    }\n\n    /**\n     * Create a regular HTML element from VNode\n     */\n    function createRegularElement(vnode: VNode): HTMLElement {\n        // Create element\n        const element = document.createElement(vnode.type);\n\n        // Set properties\n        updateProps(element, {}, vnode.props);\n\n        // Append children\n        for (const child of vnode.children) {\n            if (isNullOrBoolean(child)) continue;\n\n            const childElement = isPrimitive(child)\n                ? document.createTextNode(String(child))\n                : createDOMElement(child as VNode);\n\n            element.appendChild(childElement);\n        }\n\n        return element;\n    }\n\n    /**\n     * Main render function - renders VNode to container\n     *\n     * @param vnode - Virtual node to render\n     * @param container - Container element\n     *\n     * @example\n     * ```ts\n     * const app = createElement('div', {}, 'Hello World');\n     * render(app, document.getElementById('root')!);\n     * ```\n     */\n    export function render(vnode: VNode, container: HTMLElement): void {\n        try {\n            // Clear container\n            container.innerHTML = '';\n\n            // Create and append element\n            const element = createDOMElement(vnode);\n            container.appendChild(element);\n\n        } catch (error) {\n            handleError(error as Error, vnode, 'render');\n        }\n    }\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝","// src/core/patch.ts\n//\n// Made with ❤️ by Maysara.\n\n\n\n// ╔════════════════════════════════════════ PACK ════════════════════════════════════════╗\n\n    import type { VNode, VNodeChild } from '../types';\n    import { isNullOrBoolean, isPrimitive, getChildAt } from '../utils/helpers';\n    import { handleError } from '../utils/errors';\n    import { createDOMElement } from './render';\n    import { updateProps } from './props';\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\n\n\n\n// ╔════════════════════════════════════════ HELP ════════════════════════════════════════╗\n\n    /**\n     * Patch a single child\n     */\n    function patchChild(\n        parent: HTMLElement,\n        oldChild: VNodeChild,\n        newChild: VNodeChild,\n        index: number\n    ): void {\n        // Skip null/boolean children\n        if (isNullOrBoolean(newChild)) {\n            if (!isNullOrBoolean(oldChild)) {\n                const node = parent.childNodes[index];\n                if (node) parent.removeChild(node);\n            }\n            return;\n        }\n\n        // Convert to proper types for patch function\n        const oldVNode = isNullOrBoolean(oldChild) ? null : oldChild;\n        patch(parent, oldVNode, newChild, index);\n    }\n\n    /**\n     * Patch children by index (simple diffing without keys)\n     */\n    export function patchChildrenByIndex(\n        parent: HTMLElement,\n        oldChildren: VNodeChild[],\n        newChildren: VNodeChild[]\n    ): void {\n        const maxLength = Math.max(oldChildren.length, newChildren.length);\n\n        // Patch each child\n        for (const i of Array.from({ length: maxLength }, (_, idx) => idx)) {\n            patchChild(parent, oldChildren[i], newChildren[i], i);\n        }\n\n        // Remove excess children\n        while (parent.childNodes.length > newChildren.filter(c => !isNullOrBoolean(c)).length) {\n            const lastChild = parent.lastChild;\n            if (lastChild) parent.removeChild(lastChild);\n        }\n    }\n\n    /**\n     * Patch children with keys (optimized diffing)\n     * Properly map VNode children to DOM elements\n     */\n    export function patchChildrenWithKeys(\n        parent: HTMLElement,\n        oldChildren: VNodeChild[],\n        newChildren: VNodeChild[]\n    ): void {\n        // Step 1: Build map of old keyed elements\n        // CRITICAL FIX: Only use ELEMENT nodes, not all childNodes\n        const oldKeyMap = new Map<unknown, { vnode: VNode; element: HTMLElement }>();\n\n        // Get only element children (skip text nodes)\n        const domElements: HTMLElement[] = [];\n        for (const child of Array.from(parent.children)) {\n            domElements.push(child as HTMLElement);\n        }\n\n        // Match VNode children with DOM elements\n        let elementIndex = 0;\n        for (const child of oldChildren) {\n            if (isNullOrBoolean(child)) continue;\n            if (isPrimitive(child)) continue; // Skip text nodes in VNode children\n\n            const vnode = child as VNode;\n            const element = domElements[elementIndex];\n\n            if (!element) break;\n\n            if (vnode.props.key != null) {\n                const key = vnode.props.key;\n                oldKeyMap.set(key, { vnode, element });\n            }\n            elementIndex++;\n        }\n\n        // Step 2: Build the new DOM structure\n        const newElements: Node[] = [];\n\n        for (const newChild of newChildren) {\n            if (isNullOrBoolean(newChild)) continue;\n\n            // Handle text nodes\n            if (isPrimitive(newChild)) {\n                const textNode = document.createTextNode(String(newChild));\n                newElements.push(textNode);\n                continue;\n            }\n\n            const newVNode = newChild as VNode;\n            const key = newVNode.props.key;\n\n            // Try to reuse existing keyed element\n            if (key != null && oldKeyMap.has(key)) {\n                const { vnode: oldVNode, element } = oldKeyMap.get(key)!;\n\n                // Update the existing element\n                updateProps(element, oldVNode.props, newVNode.props);\n\n                // Recursively patch children\n                const oldChildrenArray = oldVNode.children || [];\n                const newChildrenArray = newVNode.children || [];\n\n                const childrenHaveKeys = newChildrenArray.some(\n                    c => c && typeof c === 'object' && 'props' in c && c.props.key != null\n                );\n\n                if (childrenHaveKeys) {\n                    patchChildrenWithKeys(element, oldChildrenArray, newChildrenArray);\n                } else {\n                    patchChildrenByIndex(element, oldChildrenArray, newChildrenArray);\n                }\n\n                newElements.push(element);\n                // Mark as used by deleting from map\n                oldKeyMap.delete(key);\n            } else {\n                // Create new element\n                const newElement = createDOMElement(newVNode);\n                newElements.push(newElement);\n            }\n        }\n\n        // Step 3: Update the DOM to match the new order\n        // Remove all children first\n        while (parent.firstChild) {\n            parent.removeChild(parent.firstChild);\n        }\n\n        // Append in the correct order\n        for (const element of newElements) {\n            parent.appendChild(element);\n        }\n    }\n\n    /**\n     * Patch children - decides between keyed and simple patching\n     */\n    export function patchChildren(\n        parent: HTMLElement,\n        oldChildren: VNodeChild[],\n        newChildren: VNodeChild[]\n    ): void {\n        // Check if we should use keyed diffing\n        const hasKeys = newChildren.some(child =>\n            child && typeof child === 'object' && 'props' in child && child.props.key != null\n        );\n\n        if (hasKeys) {\n            patchChildrenWithKeys(parent, oldChildren, newChildren);\n        } else {\n            patchChildrenByIndex(parent, oldChildren, newChildren);\n        }\n    }\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\n\n\n\n// ╔════════════════════════════════════════ CORE ════════════════════════════════════════╗\n\n    /**\n     * Add a new node to parent\n     */\n    function addNode(parent: HTMLElement, vnode: VNode | string | number): void {\n        const element = createDOMElement(vnode);\n        parent.appendChild(element);\n    }\n\n    /**\n     * Remove a node from parent\n     */\n    function removeNode(parent: HTMLElement, node: Node | undefined): void {\n        if (node && node.parentNode === parent) {\n            parent.removeChild(node);\n        }\n    }\n\n    /**\n     * Update text node\n     */\n    function updateTextNode(\n        parent: HTMLElement,\n        oldText: string | number,\n        newText: string | number,\n        index: number,\n        oldChild: Node | undefined\n    ): void {\n        const oldStr = String(oldText);\n        const newStr = String(newText);\n\n        if (oldStr === newStr) return;\n\n        if (oldChild?.nodeType === Node.TEXT_NODE) {\n            oldChild.textContent = newStr;\n        } else {\n            const textNode = document.createTextNode(newStr);\n            if (oldChild) {\n                parent.replaceChild(textNode, oldChild);\n            } else {\n                parent.appendChild(textNode);\n            }\n        }\n    }\n\n    /**\n     * Replace node completely\n     */\n    function replaceNode(\n        parent: HTMLElement,\n        newVNode: VNode | string | number,\n        oldChild: Node | undefined\n    ): void {\n        const newElement = createDOMElement(newVNode);\n\n        if (oldChild) {\n            parent.replaceChild(newElement, oldChild);\n        } else {\n            parent.appendChild(newElement);\n        }\n    }\n\n    /**\n     * Check if VNode has changed (needs replacement)\n     */\n    function hasVNodeChanged(oldVNode: VNode, newVNode: VNode): boolean {\n        return (\n            oldVNode.type !== newVNode.type ||\n            oldVNode.props.key !== newVNode.props.key\n        );\n    }\n\n    /**\n     * Update element in place\n     * Detect if we're patching the parent element itself vs its children\n     */\n    function updateElement(\n        parent: HTMLElement,\n        oldVNode: VNode,\n        newVNode: VNode,\n        index: number,\n        oldChild: Node | undefined\n    ): void {\n        let elementToUpdate: HTMLElement;\n\n        // CRITICAL: Check if we're patching the parent element itself\n        // This happens when parent's tag matches BOTH VNode types\n        // AND the oldChild either doesn't exist OR has a different tag than the VNode\n        // This pattern: patch(ul, ulVNode, ulVNode, 0) where we want to update ul's children\n        const parentMatchesVNode = parent.tagName.toLowerCase() === oldVNode.type &&\n                                   parent.tagName.toLowerCase() === newVNode.type;\n        const childIsDifferentType = oldChild instanceof HTMLElement &&\n                                    oldChild.tagName.toLowerCase() !== oldVNode.type;\n\n        if (parentMatchesVNode && (!oldChild || childIsDifferentType)) {\n            // We're updating the parent element itself, not a child\n            elementToUpdate = parent;\n        } else if (oldChild instanceof HTMLElement) {\n            // We're updating a child element\n            elementToUpdate = oldChild;\n        } else {\n            // Fallback: replace the node\n            replaceNode(parent, newVNode, oldChild);\n            return;\n        }\n\n        // Update props\n        updateProps(elementToUpdate, oldVNode.props, newVNode.props);\n\n        // Update children\n        const oldChildren = oldVNode.children || [];\n        const newChildren = newVNode.children || [];\n\n        patchChildren(elementToUpdate, oldChildren, newChildren);\n    }\n\n    /**\n     * Update existing node or replace if needed\n     */\n    function updateNode(\n        parent: HTMLElement,\n        oldVNode: VNode | string | number,\n        newVNode: VNode | string | number,\n        index: number,\n        oldChild: Node | undefined\n    ): void {\n        // Both are primitives (text nodes)\n        if (isPrimitive(oldVNode) && isPrimitive(newVNode)) {\n            updateTextNode(parent, oldVNode, newVNode, index, oldChild);\n            return;\n        }\n\n        // Type changed or one is primitive - replace completely\n        if (\n            (isPrimitive(oldVNode) && !isPrimitive(newVNode)) ||\n            (!isPrimitive(oldVNode) && isPrimitive(newVNode)) ||\n            hasVNodeChanged(oldVNode as VNode, newVNode as VNode)\n        ) {\n            replaceNode(parent, newVNode, oldChild);\n            return;\n        }\n\n        // Both are VNodes of same type - update in place\n        if (!isPrimitive(oldVNode) && !isPrimitive(newVNode)) {\n            updateElement(parent, oldVNode as VNode, newVNode as VNode, index, oldChild);\n        }\n    }\n\n    /**\n     * Patch/diff algorithm - updates DOM based on VNode changes\n     *\n     * @param parent - Parent HTML element\n     * @param oldVNode - Old virtual node\n     * @param newVNode - New virtual node\n     * @param index - Child index in parent\n     */\n    export function patch(\n        parent: HTMLElement,\n        oldVNode: VNode | string | number | null,\n        newVNode: VNode | string | number | null,\n        index: number = 0\n    ): void {\n        try {\n            const oldChild = getChildAt(parent, index);\n\n            // Case 1: Add new node\n            if (!oldVNode && newVNode) {\n                addNode(parent, newVNode);\n                return;\n            }\n\n            // Case 2: Remove old node\n            if (oldVNode && !newVNode) {\n                removeNode(parent, oldChild);\n                return;\n            }\n\n            // Case 3: Both exist - update or replace\n            if (oldVNode && newVNode) {\n                updateNode(parent, oldVNode, newVNode, index, oldChild);\n            }\n\n        } catch (error) {\n            handleError(\n                error as Error,\n                typeof newVNode === 'object' && newVNode !== null ? newVNode : undefined,\n                'patch'\n            );\n        }\n    }\n\n// ╚══════════════════════════════════════════════════════════════════════════════════════╝\n"]}